<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout"
	layout:decorate="~{layout/defaultLayout}">

<head>
    <title>TodoList</title>    
</head>
	
	<th:block layout:fragment="content">
    	<form role="form" th:action="|/todoList/${todoId}/new|" th:object="${todoListForm}" method="post">
	    	<h3 class="mb-4 text-gray-800">미래 계획</h3>
	    	<div class="col-lg-7 p-0">
	  			<div class="card mb-4 py-3 border-left-primary">
	  				<div class="card-body">
	  				<div class="progress">
 						<div class="progress-bar" role="progressbar" aria-valuenow="70"
  						aria-valuemin="0" aria-valuemax="100" th:style="|width:${progressWidth}%;|" th:text="|${progressWidth}%|"></div>
						</div>
  						<h3 class ="text-gray-800" th:text="${todo.title}"></h3>
	  					<div th:if="${#strings.isEmpty(todo.deadline)}" th:text="|${#temporals.format(todo.regdate, 'yyyy년 MM월 dd일')} ~ 기한없음|"></div>
	  					<div th:unless="${#strings.isEmpty(todo.deadline)}" th:text="|${#temporals.format(todo.regdate, 'yyyy년 MM월 dd일')} ~${#dates.format(todo.deadline, 'yyyy년 MM월 dd일')}|"></div>
	  					<div th:each="todoList,idx : ${todoLists}">
	  						<div class="custom-control custom-checkbox">
<!-- 	  							<div th:text="${todoList.id}"></div> -->
	  							<input type="checkbox" class="custom-control-input" th:id="|todoListCheck${idx.index}|"
	  							th:value="${todoList.type}" th:checked="${todoList.type eq T(com.hennie.entity.TodoType).DONE}">
	  							<label class="custom-control-label" th:for="|todoListCheck${idx.index}|" th:text="${todoList.title}"
	  								th:class="${todoList.type eq T(com.hennie.entity.TodoType).DONE} ? 'custom-control-label middle-line' : 'custom-control-label'"></label>
	  							<a th:href="@{/todoList/{todoId}/{listId}/delete (todoId=${todo.id}, listId=${todoList.id})}" 
	  							class="text-gray-100 d-none d-sm-inline-block btn btn-sm btn-primary shadow-sm">x</a>
	  						</div>
	  					</div>
						<input type="text" name="title" class="form-control form-control-sm" placeholder="세부 계획을 등록하세요">
<!-- 							th:class="${#fields.hasErrors('title')}? 'form-control fieldError' : 'form-control'"> -->
<!-- 					<a href='#' th:href="@{/todoList/{todoId}/new (todoId=${todo.id})}" -->
<!-- 					class="d-none d-sm-inline-block btn btn-sm btn-primary float-right shadow-sm">+</a> -->
						<button type="submit" class="d-none d-sm-inline-block btn btn-sm btn-primary shadow-sm">+</button>  			
    					<a th:href="@{/todo/{todoId}/edit (todoId=${todo.id})}"
    					class="text-gray-100 d-none d-sm-inline-block btn btn-sm btn-primary shadow-sm">수정</a>
    					<a th:href="@{/todo/{todoId}/delete (todoId=${todo.id})}" 
    					class="text-gray-100 d-none d-sm-inline-block btn btn-sm btn-primary shadow-sm">삭제</a>
    				</div>
    			</div>
    		</form>
	</th:block>

</html>
    	